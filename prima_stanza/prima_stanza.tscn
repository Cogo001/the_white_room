[gd_scene load_steps=26 format=4 uid="uid://b24imwqmcubam"]

[ext_resource type="Script" uid="uid://cpeqkfw7h7pal" path="res://prima_stanza/prima_stanza.gd" id="1_w0utg"]
[ext_resource type="AudioStream" uid="uid://bwhoio0enhftv" path="res://prima_stanza/heart-monitor-beep-96554 (mp3cut.net).mp3" id="2_w0utg"]
[ext_resource type="Texture2D" uid="uid://c65id70jm8b6o" path="res://test_sprite/test stanza.png" id="4_3a18a"]
[ext_resource type="PackedScene" uid="uid://c812w48ha7d3" path="res://Main_character/character.tscn" id="5_l5qxo"]
[ext_resource type="Texture2D" uid="uid://bkbrflrrrx8w0" path="res://asprite/finestra/Sprite-0001.png" id="6_wxs6d"]
[ext_resource type="Texture2D" uid="uid://k3ooh6yxfac8" path="res://asprite/finestra/Sprite-0002.png" id="7_84olp"]
[ext_resource type="Texture2D" uid="uid://cpcjfbqaho1yw" path="res://asprite/finestra/Sprite-0003.png" id="8_w047x"]
[ext_resource type="Texture2D" uid="uid://dk3spi877ahu5" path="res://asprite/led_bip_bip/bip.png" id="9_84olp"]
[ext_resource type="Texture2D" uid="uid://c4vtu4he1cd5x" path="res://asprite/finestra/Sprite-0004.png" id="9_v6r7y"]
[ext_resource type="Shader" uid="uid://c3bn73cqfomp2" path="res://asprite/led_bip_bip/heartbeat.gdshader" id="10_w047x"]
[ext_resource type="PackedScene" uid="uid://dah7ntl5dudo0" path="res://dialogue_avanzato/dialogue_area_2d.tscn" id="11_0vpkn"]
[ext_resource type="Script" uid="uid://ioks06t7l122" path="res://dialogue_avanzato/resource_dialogue/DialogueExportResource.gd" id="12_dhrcv"]
[ext_resource type="Script" uid="uid://6i72ifhxrr0o" path="res://dialogue_avanzato/resource_dialogue/DialogueTextResource.gd" id="13_avixt"]

[sub_resource type="Animation" id="Animation_662qm"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0, 0, 0, 1)]
}

[sub_resource type="Animation" id="Animation_wtxkd"]
resource_name = "fade_in"
length = 3.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 3),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0, 0, 0, 1), Color(0, 0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_w0utg"]
_data = {
&"RESET": SubResource("Animation_662qm"),
&"fade_in": SubResource("Animation_wtxkd")
}

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_l5qxo"]
texture = ExtResource("4_3a18a")
margins = Vector2i(1, 0)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
6:0/0 = 0
7:0/0 = 0
8:0/0 = 0
9:0/0 = 0
10:0/0 = 0
11:0/0 = 0
12:0/0 = 0
13:0/0 = 0
14:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
6:1/0 = 0
7:1/0 = 0
8:1/0 = 0
9:1/0 = 0
10:1/0 = 0
11:1/0 = 0
12:1/0 = 0
13:1/0 = 0
14:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
13:2/0 = 0
14:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
13:3/0 = 0
14:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
13:4/0 = 0
14:4/0 = 0
0:5/0 = 0
1:5/0 = 0
2:5/0 = 0
13:5/0 = 0
14:5/0 = 0
0:6/0 = 0
1:6/0 = 0
2:6/0 = 0
13:6/0 = 0
14:6/0 = 0
0:7/0 = 0
1:7/0 = 0
2:7/0 = 0
13:7/0 = 0
14:7/0 = 0
0:8/0 = 0
1:8/0 = 0
2:8/0 = 0
3:8/0 = 0
4:8/0 = 0
5:8/0 = 0
6:8/0 = 0
7:8/0 = 0
8:8/0 = 0
9:8/0 = 0
10:8/0 = 0
11:8/0 = 0
12:8/0 = 0
13:8/0 = 0
14:8/0 = 0
0:9/0 = 0
1:9/0 = 0
2:9/0 = 0
3:9/0 = 0
4:9/0 = 0
5:9/0 = 0
6:9/0 = 0
7:9/0 = 0
8:9/0 = 0
9:9/0 = 0
10:9/0 = 0
11:9/0 = 0
12:9/0 = 0
13:9/0 = 0
14:9/0 = 0

[sub_resource type="TileSet" id="TileSet_odl8q"]
sources/0 = SubResource("TileSetAtlasSource_l5qxo")

[sub_resource type="SpriteFrames" id="SpriteFrames_0vpkn"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_wxs6d")
}, {
"duration": 1.0,
"texture": ExtResource("7_84olp")
}, {
"duration": 1.0,
"texture": ExtResource("8_w047x")
}, {
"duration": 1.0,
"texture": ExtResource("9_v6r7y")
}, {
"duration": 1.0,
"texture": ExtResource("8_w047x")
}, {
"duration": 1.0,
"texture": ExtResource("7_84olp")
}, {
"duration": 3.0,
"texture": ExtResource("6_wxs6d")
}],
"loop": true,
"name": &"default",
"speed": 3.0
}]

[sub_resource type="Resource" id="Resource_0vpkn"]
script = ExtResource("13_avixt")
speaker_name = ""
speaker_img_Hframes = 1
speaker_img_rest_frame = 0
text = "Fuori c'è troppa luce, non riesco a vedere nulla."
text_speed = 18.0
text_volume_db = 0
text_volume_pitch_min = 0.85
text_volume_pitch_max = 1.15
camera_position = Vector2(999.999, 999.999)
camera_transition_time = 1.0
metadata/_custom_type_script = "uid://6i72ifhxrr0o"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dhrcv"]
size = Vector2(43, 20)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_84olp"]
size = Vector2(24, 26)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_v6r7y"]
shader = ExtResource("10_w047x")
shader_parameter/AA_FALLOFF = 1.2
shader_parameter/GRID_WIDTH = 0.1
shader_parameter/CURVE_WIDTH = 10.0
shader_parameter/FUNC_SAMPLE_STEP = 0.25
shader_parameter/SCOPE_RATE = 0.5
shader_parameter/BACK_GROUND_COLOR1 = Color(0.0354398, 0.123869, 0.182792, 1)
shader_parameter/BACK_GROUND_COLOR2 = Color(0.02, 0.05, 0.07, 1)
shader_parameter/PULSE_COLOR = Color(0, 1, 0.7, 1)
shader_parameter/HEAT_PULSE_RATE = 0.5
shader_parameter/HEAT_PULSE_STRENGTH = 0.5

[sub_resource type="Resource" id="Resource_484rk"]
script = ExtResource("13_avixt")
speaker_name = ""
speaker_img_Hframes = 1
speaker_img_rest_frame = 0
text = "E' un elettrocardiogramma,sta rilevando un battito anche se non è collegato a nulla"
text_speed = 18.0
text_volume_db = 0
text_volume_pitch_min = 0.85
text_volume_pitch_max = 1.15
camera_position = Vector2(999.999, 999.999)
camera_transition_time = 1.0
metadata/_custom_type_script = "uid://6i72ifhxrr0o"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kitrj"]
size = Vector2(30, 28)

[node name="Prima_scena" type="Node2D"]
script = ExtResource("1_w0utg")

[node name="CharacterBody2D" parent="." instance=ExtResource("5_l5qxo")]
position = Vector2(110, 146)

[node name="prima_stanza" type="Node2D" parent="."]

[node name="Fade_in" type="ColorRect" parent="prima_stanza"]
visible = false
offset_right = 1152.0
offset_bottom = 652.0
color = Color(0, 0, 0, 1)

[node name="fade_in" type="AnimationPlayer" parent="prima_stanza/Fade_in"]
libraries = {
&"": SubResource("AnimationLibrary_w0utg")
}

[node name="Bip_bip_hospital" type="AudioStreamPlayer" parent="prima_stanza"]
stream = ExtResource("2_w0utg")
volume_db = -30.0
pitch_scale = 0.6
autoplay = true

[node name="ColorRect" type="ColorRect" parent="prima_stanza"]
visible = false
z_index = -2
offset_right = 645.0
offset_bottom = 499.0
mouse_filter = 2
color = Color(0, 0, 0, 1)
metadata/_edit_lock_ = true

[node name="TileMapLayer" type="TileMapLayer" parent="prima_stanza"]
tile_map_data = PackedByteArray("AAAAAAAAAAAAAAAAAAABAAEAAAABAAEAAAAFAAAAAAAFAAAAAAAFAAEAAAAFAAEAAAAGAAAAAAAGAAAAAAAGAAEAAAAGAAEAAAAHAAAAAAAHAAAAAAAHAAEAAAAHAAEAAAAIAAAAAAAIAAAAAAAIAAEAAAAIAAEAAAAJAAAAAAAJAAAAAAAJAAEAAAAJAAEAAAAKAAAAAAAKAAAAAAAKAAEAAAAKAAEAAAALAAAAAAALAAAAAAALAAEAAAALAAEAAAAMAAAAAAAMAAAAAAAMAAEAAAAMAAEAAAACAAAAAAACAAAAAAACAAEAAAACAAEAAAADAAAAAAADAAAAAAADAAEAAAADAAEAAAAEAAAAAAAEAAAAAAAEAAEAAAAEAAEAAAABAAAAAAABAAAAAAAAAAIAAAAAAAIAAAAAAAMAAAAAAAMAAAAAAAQAAAAAAAQAAAAAAAUAAAAAAAUAAAAAAAYAAAAAAAYAAAAAAAcAAAAAAAcAAAABAAIAAAABAAIAAAABAAMAAAABAAMAAAABAAQAAAABAAQAAAABAAUAAAABAAUAAAABAAYAAAABAAYAAAABAAcAAAABAAcAAAAAAAgAAAAAAAIAAAAAAAkAAAAAAAMAAAAAAAoAAAAAAAQAAAAAAAsAAAAAAAUAAAAAAAwAAAAAAAIAAAABAAgAAAABAAIAAAABAAkAAAABAAMAAAABAAoAAAABAAQAAAABAAsAAAABAAUAAAABAAwAAAABAAgAAAAAAAEAAAAAAAEAAAAAAA0AAAAAAAkAAAABAA0AAAABAAkAAAACAA0AAAACAAkAAAADAA0AAAACAAkAAAAEAA0AAAACAAkAAAAFAA0AAAACAAkAAAAGAA0AAAACAAkAAAAHAA0AAAACAAkAAAAIAA0AAAACAAkAAAAJAA0AAAACAAkAAAAKAA0AAAACAAkAAAALAA0AAAACAAkAAAAMAA0AAAACAAkAAAACAAwAAAACAAgAAAADAAwAAAACAAgAAAAEAAwAAAACAAgAAAAFAAwAAAACAAgAAAAGAAwAAAACAAgAAAAHAAwAAAACAAgAAAAIAAwAAAACAAgAAAAJAAwAAAACAAgAAAAKAAwAAAACAAgAAAALAAwAAAACAAgAAAAMAAwAAAACAAgAAAAYAAAAAAAOAAAAAAAYAAEAAAAOAAEAAAAYAAIAAAAOAAIAAAAYAAMAAAAOAAUAAAAYAAQAAAAOAAUAAAAYAAUAAAAOAAUAAAAYAAYAAAAOAAUAAAAYAAcAAAAOAAUAAAAYAAgAAAAOAAUAAAAYAAkAAAAOAAUAAAAYAAoAAAAOAAUAAAAYAAsAAAAOAAUAAAAYAAwAAAAOAAUAAAAYAA0AAAAOAAkAAAAXAAAAAAANAAAAAAAXAAEAAAANAAEAAAAXAAIAAAANAAIAAAAXAAMAAAANAAIAAAAXAAQAAAANAAIAAAAXAAUAAAANAAIAAAAXAAYAAAANAAIAAAAXAAcAAAANAAIAAAAXAAgAAAANAAIAAAAXAAkAAAANAAIAAAAXAAoAAAANAAIAAAAXAAsAAAANAAIAAAAXAAwAAAANAAgAAAAXAA0AAAANAAkAAAANAAAAAAAEAAAAAAANAAEAAAAEAAEAAAAOAAAAAAAEAAAAAAAOAAEAAAAEAAEAAAAPAAAAAAAEAAAAAAAPAAEAAAAEAAEAAAAQAAAAAAAEAAAAAAAQAAEAAAAEAAEAAAARAAAAAAAEAAAAAAARAAEAAAAEAAEAAAASAAAAAAAEAAAAAAASAAEAAAAEAAEAAAATAAAAAAAEAAAAAAATAAEAAAAEAAEAAAAUAAAAAAAEAAAAAAAUAAEAAAAEAAEAAAAVAAAAAAAEAAAAAAAVAAEAAAAEAAEAAAAWAAAAAAAEAAAAAAAWAAEAAAAEAAEAAAANAAwAAAAKAAgAAAANAA0AAAAKAAkAAAAOAAwAAAAKAAgAAAAOAA0AAAAKAAkAAAAPAAwAAAAKAAgAAAAPAA0AAAAKAAkAAAAQAAwAAAAKAAgAAAAQAA0AAAAKAAkAAAARAAwAAAAKAAgAAAARAA0AAAAKAAkAAAASAAwAAAAKAAgAAAASAA0AAAAKAAkAAAATAAwAAAAKAAgAAAATAA0AAAAKAAkAAAAUAAwAAAAKAAgAAAAUAA0AAAAKAAkAAAAVAAwAAAAKAAgAAAAVAA0AAAAKAAkAAAAWAAwAAAAKAAgAAAAWAA0AAAAKAAkAAAA=")
tile_set = SubResource("TileSet_odl8q")
metadata/_edit_lock_ = true

[node name="finestra" type="AnimatedSprite2D" parent="prima_stanza"]
position = Vector2(203, 29)
sprite_frames = SubResource("SpriteFrames_0vpkn")
autoplay = "default"
frame_progress = 0.693945

[node name="DialogueArea2D" parent="prima_stanza/finestra" instance=ExtResource("11_0vpkn")]
dialogue = Array[ExtResource("12_dhrcv")]([SubResource("Resource_0vpkn")])

[node name="CollisionShape2D" type="CollisionShape2D" parent="prima_stanza/finestra/DialogueArea2D"]
position = Vector2(-1, -7)
shape = SubResource("RectangleShape2D_dhrcv")

[node name="elettrocardiogramma" type="StaticBody2D" parent="prima_stanza"]
position = Vector2(356, 36)
collision_layer = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="prima_stanza/elettrocardiogramma"]
shape = SubResource("RectangleShape2D_84olp")

[node name="Sprite2D2" type="Sprite2D" parent="prima_stanza/elettrocardiogramma"]
material = SubResource("ShaderMaterial_v6r7y")
scale = Vector2(0.385965, 0.326087)
texture = ExtResource("9_84olp")

[node name="Sprite2D" type="Sprite2D" parent="prima_stanza/elettrocardiogramma/Sprite2D2"]
z_index = 1
position = Vector2(0, 10.7333)
scale = Vector2(2.59091, 3.06667)
texture = ExtResource("9_84olp")

[node name="DialogueArea2D" parent="prima_stanza/elettrocardiogramma/Sprite2D2" instance=ExtResource("11_0vpkn")]
position = Vector2(3.8147e-05, 3.06667)
scale = Vector2(2.59091, 3.06667)
dialogue = Array[ExtResource("12_dhrcv")]([SubResource("Resource_484rk")])

[node name="CollisionShape2D" type="CollisionShape2D" parent="prima_stanza/elettrocardiogramma/Sprite2D2/DialogueArea2D"]
position = Vector2(0.999989, -3.8147e-06)
shape = SubResource("RectangleShape2D_kitrj")

[connection signal="finished" from="prima_stanza/Bip_bip_hospital" to="." method="_on_audio_stream_player_finished"]
